<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/css.css">
    <title>Bomba de tiempo</title>
</head>

<body>
    
<header id="nombre"></header>

<section class="pantallas" id="pantalla1" >
<audio src="./multimedia/musica-fondo-pantalla-1.m4a" type="audio/mpeg" autoplay="autoplay" loop="loop"></audio>
<img id="fondo" src="./multimedia/fondo.jpg">
<img id="titulo" src="multimedia/titulo22.png">
<div id="centrar">
    <h2>Bienvenido, te desafiamos a ganar nuestro juego</h2>

    <h3>
        Tenes una bomba, 10 cables y 60 segundos para desactivarla.<br>
        Cada cable erroneo que cortes te restara 10 segundos de tiempo.<br>
        Tenes que desactivar 3 bombas para ganar.<br>
        Estas listo?
    </h3>

    <input id="nombreju" type="text" placeholder="Ingresa tu nombre">

    <div>
        <button id="irapantalla2">Comenzar</button>
    </div>
</div>

</section>

<section class="pantallas" id="pantalla2">

<img id="bombita" src="multimedia/bomba.png">
<div><span>Cantidad de bombas desactivadas: <div id="cantbombas">0</div></span></div>

<div>
    <div id="contenedor-de-tiempo">
        <h1 id="tiemporestante" >Tiempo Restante</h1>
        <div id="cuentaregresiva">60</div>
        <button id="activarbomba">Activar Bomba</button>
       
        </div>
        <img src="multimedia/bomba-central.png" id="bombadetiempo">
</div>

<div class="contenedorcables">

    <div class="cables" id="cable0"></div>
    <div class="cables" id="cable1"></div>
    <div class="cables" id="cable2"></div>
    <div class="cables" id="cable3"></div>
    <div class="cables" id="cable4"></div>
    <div class="cables" id="cable5"></div>
    <div class="cables" id="cable6"></div>
    <div class="cables" id="cable7"></div>
    <div class="cables" id="cable8"></div>
    <div class="cables" id="cable9"></div>

</div>

<div id="ups">
    <p>
        Cable incorrecto!<br>
         Te quedan 10 segundos menos!
    </p>
</div>
</section>

<section class="pantallas" id="pantalla3">

    <img id="looser" src="multimedia/looser.png">

    <button id="jugardenuevol">Jugar de nuevo</button>

    <img id="rip" src="multimedia/rip.png"> 

</section>



<section class="pantallas" id="pantalla4">

    <img id="winner" src="multimedia/winner-text.png">

    <button id="jugardenuevo2">Jugar de nuevo</button>

    <img id="copa" src="multimedia/copa.png">
    
</section>



<section class="pantallas" id="pantalla4">

</section>

<script>

//pantalla 1    

var nombre = document.getElementById("nombre");
var info = document.getElementById("nombreju");
var boton1 = document.getElementById("irapantalla2");

//funciones mostrar pantalla 2
function mostrarPantalla2(){
			document.querySelector("#pantalla1").style.display = "none";
			document.querySelector("#pantalla2").style.display = "block";
            document.querySelector("#pantalla3").style.display = "none";
            document.querySelector("#pantalla4").style.display = "none";
		}

//que el boton comenzar ponga header, vacie input y lleve a pantalla2
boton1.onclick = function(){
nombre.innerHTML = info.value;   //ponemos nombre del input en el header
info.value="";                   // para que despues de ingresar el nombre vuelva a vaciarse el input
mostrarPantalla2();                               // funcion para que lleve a pantalla 2

}

//pantalla2

//cronometro
var divcuentaregresiva = document.getElementById("cuentaregresiva");//div donde se ve la cuenta regresiva
var activar= document.getElementById("activarbomba"); // boton que activa la bomba
var intervalo; //tengo que declarar la variable fuera de la funcion para que pueda darle clear desde todo el dom.

// funcion de la cuenta regresiva

function iniciarcuentaregresiva(){ 
    var valorinicial = 60;
        intervalo = setInterval(function(){
        divcuentaregresiva.innerHTML = valorinicial;
        if(valorinicial !== 0){
            valorinicial --;
        }
          
        
    }, 1000);
    
}
activar.onclick = function(){
    clearInterval(intervalo);
    iniciarcuentaregresiva();
}

// funciones de cables
var random ; //para que nos de una posicion random
var cables= document.getElementsByClassName("cables"); //cables que formaran parte del random

// FUNCION QUE REINICIA EL CABLE RANDOM
function reiniciarRandom (){      
    random =  Math.floor(Math.random()*(9-0+1))+0;
    console.log(random);
}


// arma un cable ganador pide un numero random y le asigna esa clase a esa posicion 
function cableGanador (){
    reiniciarRandom();
    cables[random].setAttribute("class","ganador");
    

}
cableGanador(); // cable que desactiva la bomba 

var intervalo2; //tengo que declarar la variable fuera de la funcion para que pueda darle clear desde todo el dom.

//funcion que te lleva a la pantalla de looser
function mostrarPantalla3(){
            document.querySelector("#pantalla1").style.display = "none";
			document.querySelector("#pantalla2").style.display = "none";
			document.querySelector("#pantalla3").style.display = "block";
            document.querySelector("#pantalla4").style.display = "none";
           
		}


//funcion para restar 10 segundos al contador
function cableincorrecto () {
    var timeactual = divcuentaregresiva.innerHTML;
    var resta= divcuentaregresiva.innerHTML=timeactual-10;
        if (resta<0) {
            resta= divcuentaregresiva.innerHTML=0;
          mostrarPantalla3();
        }
            clearInterval(intervalo); 
            clearInterval(intervalo2);
             intervalo2 = setInterval(function(){
                divcuentaregresiva.innerHTML = resta;
                if(resta > 0){
                    resta --;
                }
                
            }, 1000);
            document.getElementById("ups").style.display="block"; //muestro el mensaje que avisa que tiene 10seg menos
            //el timeout establece que luego de ese tiempo, el mensaje desaparecera nuevamente.
            setTimeout(function(){
                document.getElementById("ups").style.display="none";
            },2000);
            
}

//Un For recorre los cables y asigna las funciones correspondientes segun la clase
for(i=0;i<cables.length; i++){
    if (cables[i].getAttribute("class")=="cables") {
        cables[i].onclick= cableincorrecto;
        
    }
    else{
        if(cables[i].getAttribute("class")!="cables"){
            //funcion de ganar aun no definida
    }
}
}

//pantalla 3 looser
//funcion para que el boton jugar de nuevo lleve a pantalla1 para jugar de nuevo despues de perder
function mostrarPantalla1(){
            document.querySelector("#pantalla1").style.display = "block";
			document.querySelector("#pantalla2").style.display = "none";
			document.querySelector("#pantalla3").style.display = "none";
            document.querySelector("#pantalla4").style.display = "none";
		}

 var btnjugardnuevol =document.getElementById("jugardenuevol");

 btnjugardnuevol. onclick = function(){
    mostrarPantalla1();
 }

 //pantalla 4 winer
<<<<<<< HEAD
 //funcion para el boton
=======
 //fincion para el boton

if(divcuentaregresiva.innerHTML==0){
    //pasar a pantalla perdiste
}

var cantBombas= document.getElementById("cantbombas").innerHTML; // div para cantidad de bombas
var desactivaBomba = document.getElementsByClassName("ganador");
>>>>>>> c5d51bb9ad3b1f0f20b9fceffa9eeb89a4e96a0c

 var btnjugardenuevo2 = document.getElementById("jugardenuevo2");

<<<<<<< HEAD
 btnjugardenuevo2.onclick = function () {
    mostrarPantalla1 ();
=======
for(i=0;i<desactivaBomba.length;i++){
    desactivaBomba[i].onclick=bomba_desactivada;
}

 function bomba_desactivada(){
        cantBombas=cantBombas+1;
        //desactivaste una bomba, escribir div y usar display none, etc
        reiniciar_bomba();
        if(cantBombas==3){
            alert("ganaste"); //mostrar pantalla ganadora
        }
 }
function reiniciar_bomba(){
     cableGanador();
     clearInterval(intervalo);
     clearInterval(intervalo2);
     iniciarcuentaregresiva();
>>>>>>> c5d51bb9ad3b1f0f20b9fceffa9eeb89a4e96a0c
 }

</script>

</body>
</html>