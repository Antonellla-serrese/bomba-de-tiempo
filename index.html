<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/css.css">
    <title>Bomba de tiempo</title>
</head>

<body id="fondo" style="background-image: url(./multimedia/fondo.jpg);">
    
<header id="nombre"></header>

<section class="pantallas" id="pantalla1">
    <audio src="./multimedia/musica-fondo-pantalla-1.m4a" type="audio/mpeg" autoplay="autoplay" loop="loop"></audio>

<img id="titulo" src="multimedia/titulo22.png">
<div id="centrar">
    <h2>Bienvenido, te desafiamos a ganar nuestro juego</h2>

    <h3>
        Tenes una bomba, 10 cables y 60 segundos para desactivarla.<br>
        Cada cable erroneo que cortes te restara 10 segundos de tiempo.<br>
        Tenes que desactivar 3 bombas para ganar.<br>
        Estas listo?

    </h3>

    <input id="nombreju" type="text" placeholder="Ingresa tu nombre">

    <div>
        <button id="irapantalla2">Comenzar</button>
    </div>
</div>

</section>

<section class="pantallas" id="pantalla2">

<img id="bombita" src="multimedia/bomba.png">
<div id="cantbombas"></div>

<div>
    <div id="contenedor-de-tiempo">
        <h1 id="tiemporestante" >Tiempo Restante</h1>
        <div id="cuentaregresiva">60</div>
        <button id="activarbomba">Activar Bomba</button>
       
        </div>
        <img src="multimedia/bomba-central.png" id="bombadetiempo">
</div>

<div class="contenedorcables">

    <div class="cables" id="cable0"></div>
    <div class="cables" id="cable1"></div>
    <div class="cables" id="cable2"></div>
    <div class="cables" id="cable3"></div>
    <div class="cables" id="cable4"></div>
    <div class="cables" id="cable5"></div>
    <div class="cables" id="cable6"></div>
    <div class="cables" id="cable7"></div>
    <div class="cables" id="cable8"></div>
    <div class="cables" id="cable9"></div>

</div>

<div id="ups">
    <p>
        Cable incorrecto!<br>
         Te quedan 10 segundos menos!
    </p>
</div>
</section>

<section class="pantallas" id="pantalla3">

    <img id="looser" src="multimedia/looser.png">

    <button id="jugardenuevo">Jugar de nuevo</button>

    <img id="rip" src="multimedia/rip.png">

 

 

</section>

<section class="pantallas" id="pantalla4">

</section>

<script>

//pantalla 1    

var nombre = document.getElementById("nombre");
var info = document.getElementById("nombreju");
var boton1 = document.getElementById("irapantalla2");

//que el boton comenzar ponga header, vacie input y lleve a pantalla2
boton1.onclick = function(){
nombre.innerHTML = info.value;   //ponemos nombre del input en el header
info.value="";                   // para que despues de ingresar el nombre vuelva a vaciarse el input
                                // hay que agregar funcion para que lleve a pantalla 2


}

//pantalla2

//cronometro
var divcuentaregresiva = document.getElementById("cuentaregresiva");//div donde se ve la cuenta regresiva
var activar= document.getElementById("activarbomba"); // boton que activa la bomba
var intervalo; //tengo que declarar la variable fuera de la funcion para que pueda darle clear desde todo el dom.

// funcion de la cuenta regresiva
activar.onclick = function iniciarcuentaregresiva(){ 
    var valorinicial = 60;
        intervalo = setInterval(function(){
        divcuentaregresiva.innerHTML = valorinicial;
        if(valorinicial !== 0){
            valorinicial --;
        }
          
        
    }, 1000);
    
}

// funciones de cables
var random ; //para que nos de una posicion random
var cables= document.getElementsByClassName("cables"); //cables que formaran parte del random

// FUNCION QUE REINICIA EL CABLE RANDOM
function reiniciarRandom (){      
    random =  Math.floor(Math.random()*(9-0+1))+0;
    console.log(random);
}


// arma un cable ganador pide un numero random y le asigna esa clase a esa posicion 
function cableGanador (){
    reiniciarRandom();
    cables[random].setAttribute("class","ganador");
    

}
cableGanador(); // cable que desactiva la bomba 

//cuando haces click en el cable ganador te suma una bomba
var cantBombas= document.getElementById("cantbombas"); // div para cantidad de bombas
var desactivaBomba = document.getElementsByClassName("ganador");
var contadorBombas = 0;
//desactivaBomba.onclick = function(){
//cantBombas.innerHTML = contadorBombas +1;
//console.log("1");

//}

var intervalo2; //tengo que declarar la variable fuera de la funcion para que pueda darle clear desde todo el dom.

//funcion para restar 10 segundos al contador
function cableincorrecto () {
    var timeactual = divcuentaregresiva.innerHTML;
    var resta= divcuentaregresiva.innerHTML=timeactual-10;
            clearInterval(intervalo); 
            clearInterval(intervalo2);
             intervalo2 = setInterval(function(){
                divcuentaregresiva.innerHTML = resta;
                if(resta !== 0){
                    resta --;
                }
            }, 1000);
            document.getElementById("ups").style.display="block"; //muestro el mensaje que avisa que tiene 10seg menos
            //el timeout establece que luego de ese tiempo, el mensaje desaparecera nuevamente.
            setTimeout(function(){
                document.getElementById("ups").style.display="none";
            },2000);
            
}

//Un For recorre los cables y asigna las funciones correspondientes segun la clase
for(i=0;i<cables.length; i++){
    if (cables[i].getAttribute("class")=="cables") {
        cables[i].onclick= cableincorrecto;
        
    }
    else{
        if(cables[i].getAttribute("class")!="cables"){
            //funcion de ganar aun no definida
    }
}
}

// revisar que cuando la bomba llega a cero no deja de contar,
// sigue en -1, -2 y asi y si le das activar de nuevo vuelve a 60 pero mostrando ese bug
//





</script>

</body>
</html>